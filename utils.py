# utils.py

from aiogram import types

# –°–æ–æ–±—â–µ–Ω–∏—è
GREETING = (
    "–ü—Ä–∏–≤–µ—Ç, —Å–æ–ª–Ω—Ü–µ! ‚òÄÔ∏è\n"
    "–¢—ã –≤ —Ç–∞–π–º–µ—Ä–µ –ø–æ –º–µ—Ç–æ–¥—É —Å—É–ø–µ—Ä–∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏.\n"
    "–ö–æ–∂–∞ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ —Å–æ–ª–Ω—Ü—É –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ ‚Äî –∏ –∑–∞–≥–∞—Ä –ø–æ–ª—É—á–∞–µ—Ç—Å—è —Ä–æ–≤–Ω—ã–º, –≥–ª—É–±–æ–∫–∏–º –∏ –±–µ–∑ –æ–∂–æ–≥–æ–≤.\n\n"
    "–ú–µ—Ç–æ–¥ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –Ω–∞—É—á–Ω—ã—Ö –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö: –∫–æ—Ä–æ—Ç–∫–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç –≤—ã—Ä–∞–±–æ—Ç–∫—É –º–µ–ª–∞–Ω–∏–Ω–∞ –∏ –≥–æ—Ä–º–æ–Ω–æ–≤ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏.\n"
    "–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ —Å–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫ –æ–∂–æ–≥–æ–≤ –∏ –¥–µ–ª–∞–µ—Ç –∑–∞–≥–∞—Ä —É—Å—Ç–æ–π—á–∏–≤—ã–º.\n\n"
    "–ù–∞—á–∏–Ω–∞–π —Å —à–∞–≥–∞ 1 ‚Äî –¥–∞–∂–µ –µ—Å–ª–∏ —É–∂–µ –Ω–µ–º–Ω–æ–≥–æ –∑–∞–≥–æ—Ä–µ–ª(–∞).\n"
    "–ö–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –¥–µ–Ω—å –∏ –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Ä—ã–≤–∞ ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–π—Å—è –Ω–∞ 2 —à–∞–≥–∞ –Ω–∞–∑–∞–¥.\n\n"
    "–•–æ—á–µ—à—å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî –∂–º–∏ /info."
)

INFO_TEXT = (
    "‚ÑπÔ∏è –ò–Ω—Ñ–æ\n"
    "–ú–µ—Ç–æ–¥ —Å—É–ø–µ—Ä–∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ ‚Äî –Ω–∞—É—á–Ω–æ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∑–∞–≥–∞—Ä–∞.\n"
    "–¢—ã –ø—Ä–æ—Ö–æ–¥–∏—à—å 12 —à–∞–≥–æ–≤ ‚Äî –∫–∞–∂–¥—ã–π —Å —Ç–∞–π–º–∏–Ω–≥–æ–º –∏ —Å–º–µ–Ω–æ–π –ø–æ–∑–∏—Ü–∏–π.\n\n"
    "–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:\n"
    "1. –ù–∞—á–Ω–∏ —Å —à–∞–≥–∞ 1\n"
    "2. –í–∫–ª—é—á–∏ —Ç–∞–π–º–µ—Ä –∏ —Å–ª–µ–¥—É–π –ø–æ–∑–∏—Ü–∏—è–º\n"
    "3. –ö–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –¥–µ–Ω—å –∏ –ø–æ—Å–ª–µ –ª—é–±–æ–≥–æ –ø–µ—Ä–µ—Ä—ã–≤–∞ ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–π—Å—è –Ω–∞ 2 —à–∞–≥–∞ –Ω–∞–∑–∞–¥\n"
    "4. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö 12 —à–∞–≥–æ–≤ ‚Äî –º–æ–∂–µ—à—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∑–∞–≥–∞—Ä –≤ –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–º —Ä–∏—Ç–º–µ\n\n"
    "–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –∑–∞–≥–æ—Ä–∞—Ç—å —Å 7:00 –¥–æ 11:00 –∏ –ø–æ—Å–ª–µ 17:00 ‚Äî –≤ —ç—Ç–æ –≤—Ä–µ–º—è —Å–æ–ª–Ω—Ü–µ –º—è–≥–∫–æ–µ, –∏ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏–π –º–æ–∂–Ω–æ –∑–∞–≥–æ—Ä–∞—Ç—å –±–µ–∑ SPF.\n"
    "–° 11:00 –¥–æ 17:00 ‚Äî —Å–æ–ª–Ω—Ü–µ –±–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ. –ï—Å–ª–∏ –æ—Å—Ç–∞—ë—à—å—Å—è –Ω–∞ —É–ª–∏—Ü–µ ‚Äî –Ω–∞–¥–µ–≤–∞–π –æ–¥–µ–∂–¥—É –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π SPF.\n\n"
    "–ï—Å–ª–∏ –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã ‚Äî –ø–∏—à–∏: @sunxbeach_director"
)

STEP_COMPLETED_MESSAGE = "–®–∞–≥ –∑–∞–≤–µ—Ä—à—ë–Ω!"
SESSION_TERMINATED_MESSAGE = "–°–µ–∞–Ω—Å –∑–∞–≤–µ—Ä—à—ë–Ω.\n–ú–æ–∂–µ—à—å –≤–µ—Ä–Ω—É—Ç—å—Å—è –ø–æ–∑–∂–µ –∏ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ ‚òÄÔ∏è"

# –ü–æ–∑–∏—Ü–∏–∏
POSITIONS = ["–õ–∏—Ü–æ–º –≤–≤–µ—Ä—Ö", "–ù–∞ –∂–∏–≤–æ—Ç–µ", "–õ–µ–≤—ã–π –±–æ–∫", "–ü—Ä–∞–≤—ã–π –±–æ–∫", "–í —Ç–µ–Ω–∏"]

# –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–≤ –º–∏–Ω—É—Ç–∞—Ö)
DURATIONS_MIN = [
    [1.5, 1.5, 1.0, 1.0, 3.0],
    [2.0, 2.0, 1.0, 1.0, 3.0],
    [3.0, 3.0, 1.5, 1.5, 5.0],
    [5.0, 5.0, 2.5, 2.5, 5.0],
    [7.0, 7.0, 3.0, 3.0, 7.0],
    [9.0, 9.0, 5.0, 5.0, 10.0],
    [12.0, 12.0, 7.0, 7.0, 10.0],
    [15.0, 15.0, 10.0, 10.0, 10.0],
    [20.0, 20.0, 15.0, 15.0, 15.0],
    [25.0, 25.0, 20.0, 20.0, 20.0],
    [35.0, 35.0, 25.0, 25.0, 30.0],
    [45.0, 45.0, 30.0, 30.0, 40.0],
]

# –§–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏
def format_duration(minutes):
    m = int(minutes)
    s = int((minutes - m) * 60)
    if s == 0:
        return f"{m} –º–∏–Ω"
    elif m == 0:
        return f"{s} —Å–µ–∫"
    else:
        return f"{m} –º–∏–Ω {s} —Å–µ–∫"

# –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —à–∞–≥–æ–≤ (—á –º–∏–Ω)
steps_keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=3)
for i, durations in enumerate(DURATIONS_MIN):
    total = int(sum(durations))
    h = total // 60
    m = total % 60
    label = f"{h} —á {m} –º–∏–Ω" if h else f"{m} –º–∏–Ω"
    steps_keyboard.insert(types.KeyboardButton(f"–®–∞–≥ {i+1} ({label})"))
steps_keyboard.add(types.KeyboardButton("‚ÑπÔ∏è –ò–Ω—Ñ–æ"))

# –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏
control_keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True)
control_keyboard.add(types.KeyboardButton("‚è≠Ô∏è –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å"))
control_keyboard.add(types.KeyboardButton("‚õî –ó–∞–≤–µ—Ä—à–∏—Ç—å"))
control_keyboard.add(types.KeyboardButton("‚Ü©Ô∏è –ù–∞–∑–∞–¥ –Ω–∞ 2 —à–∞–≥–∞"))
control_keyboard.add(types.KeyboardButton("üìã –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —à–∞–≥–∞–º"))

# –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ (4 –∫–Ω–æ–ø–∫–∏ –≤ 4 —Å—Ç—Ä–æ–∫–∏)
complete_keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True)
complete_keyboard.add(types.KeyboardButton("‚ñ∂Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"))
complete_keyboard.add(types.KeyboardButton("üìã –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —à–∞–≥–∞–º"))
complete_keyboard.add(types.KeyboardButton("‚Ü©Ô∏è –ù–∞–∑–∞–¥ –Ω–∞ 2 —à–∞–≥–∞"))
complete_keyboard.add(types.KeyboardButton("‚õî –ó–∞–≤–µ—Ä—à–∏—Ç—å"))

# –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–µ–∞–Ω—Å–∞ –∏–ª–∏ 12 —à–∞–≥–∞ (—Ç–æ–ª—å–∫–æ 2 –∫–Ω–æ–ø–∫–∏)
control_keyboard_end = types.ReplyKeyboardMarkup(resize_keyboard=True)
control_keyboard_end.add(types.KeyboardButton("‚Ü©Ô∏è –ù–∞–∑–∞–¥ –Ω–∞ 2 —à–∞–≥–∞"))
control_keyboard_end.add(types.KeyboardButton("üìã –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —à–∞–≥–∞–º"))
